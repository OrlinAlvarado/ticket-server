(this["webpackJsonpticket-app"]=this["webpackJsonpticket-app"]||[]).push([[0],{221:function(e,t,c){},395:function(e,t,c){"use strict";c.r(t);var n=c(5),r=c(0),s=c(29),i=c.n(s),a=(c(221),c(47)),o=c(185),j=c.n(o),l=Object(r.createContext)(),b=function(e){var t=e.children,c=function(e){var t=Object(r.useMemo)((function(){return j.a.connect(e,{transports:["websocket"]})}),[e]),c=Object(r.useState)(!1),n=Object(a.a)(c,2),s=n[0],i=n[1];return Object(r.useEffect)((function(){i(t.connected)}),[t]),Object(r.useEffect)((function(){t.on("connect",(function(){return i(!0)}))}),[t]),Object(r.useEffect)((function(){t.on("disconnect",(function(){return i(!1)}))}),[t]),{socket:t,online:s}}("https://ticket-server-hn.herokuapp.com"),s=c.socket,i=c.online;return Object(n.jsx)(l.Provider,{value:{socket:s,online:i},children:t})},u=Object(r.createContext)(),O=function(e){var t=e.children,c=Object(r.useState)(!1),s=Object(a.a)(c,2),i=s[0],o=s[1];return Object(n.jsx)(u.Provider,{value:{ocultarMenu:i,showMenu:function(){o(!1)},hideMenu:function(){o(!0)}},children:t})},d=c(398),x=c(403),h=c(411),m=c(412),p=c(413),f=c(73),g=c(33),v=c(108),k=c(402),y=c(397),I=c(401),S=c(404),C=c(405),T=c(213),E=c(407),w=function(e){var t=Object(r.useContext)(u),c=t.showMenu,n=t.hideMenu;Object(r.useEffect)((function(){e?n():c()}),[e,n,c])},F=function(){return{agente:localStorage.getItem("agente"),escritorio:localStorage.getItem("escritorio")}},M=k.a.Title,N=k.a.Text,P={labelCol:{span:8},wrapperCol:{span:14}},z={wrapperCol:{offset:8,span:14}},H=function(){var e=Object(g.g)(),t=Object(r.useState)(F()),c=Object(a.a)(t,1)[0];w(!1);if(c.agente&&c.escritorio)return Object(n.jsx)(g.a,{to:"/escritorio"});return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M,{level:2,children:"Ingresar"}),Object(n.jsx)(N,{children:"Ingrese su nombre y numero de escritorio"}),Object(n.jsx)(y.a,{}),Object(n.jsxs)(I.a,Object(v.a)(Object(v.a)({},P),{},{name:"basic",initialValues:{remember:!0},onFinish:function(t){var c=t.agente,n=t.escritorio;localStorage.setItem("agente",c),localStorage.setItem("escritorio",n),e.push("/escritorio")},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(n.jsx)(I.a.Item,{label:"Nombre del agente",name:"agente",rules:[{required:!0,message:"Por favor ingrese su nombre"}],children:Object(n.jsx)(S.a,{})}),Object(n.jsx)(I.a.Item,{label:"Escritorio",name:"escritorio",rules:[{required:!0,message:"Ingrese el n\xfamero de escritorio"}],children:Object(n.jsx)(C.a,{min:1,max:99})}),Object(n.jsx)(I.a.Item,Object(v.a)(Object(v.a)({},z),{},{children:Object(n.jsxs)(T.a,{type:"primary",htmlType:"submit",shape:"round",children:[Object(n.jsx)(E.a,{}),"Ingresar"]})}))]}))]})},q=c(92),A=c(54),J=c(399),B=c(400),K=c(406),U=c(154),V=c.n(U),W=c(203),D=function(){var e=Object(W.a)(V.a.mark((function e(){var t,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://ticket-server-hn.herokuapp.com","/ultimos"));case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c.ultimos);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=k.a.Title,L=k.a.Text,Q=function(){w(!0);var e=Object(r.useContext)(l).socket,t=Object(r.useState)([]),c=Object(a.a)(t,2),s=c[0],i=c[1];return Object(r.useEffect)((function(){return e.on("ticket-asignado",(function(e){i(e)})),function(){e.off("ticket-asignado")}}),[e]),Object(r.useEffect)((function(){D().then((function(e){return i(e)}))}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(G,{level:1,children:"Atendiendo al cliente"}),Object(n.jsxs)(q.a,{children:[Object(n.jsx)(A.a,{span:12,children:Object(n.jsx)(J.b,{dataSource:s.slice(0,3),renderItem:function(e){return Object(n.jsx)(J.b.Item,{children:Object(n.jsx)(B.a,{style:{width:300,marginTop:16},actions:[Object(n.jsxs)(K.a,{color:"volcano",children:[" ",e.agente]}),Object(n.jsxs)(K.a,{color:"magenta",children:[" Escritorio: ",e.escritorio]})],children:Object(n.jsxs)(G,{children:["No. ",e.numero]})})})}})}),Object(n.jsxs)(A.a,{span:12,children:[Object(n.jsx)(y.a,{children:" Historial "}),Object(n.jsx)(J.b,{dataSource:s.slice(3),renderItem:function(e){return Object(n.jsx)(J.b.Item,{children:Object(n.jsx)(J.b.Item.Meta,{title:"Ticket No. ".concat(e.numero),description:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(L,{type:"secondary",children:"En el escritorio: "}),Object(n.jsx)(K.a,{color:"magenta",children:e.numero}),Object(n.jsx)(L,{type:"secondary",children:"Agente: "}),Object(n.jsx)(K.a,{color:"volcano",children:e.agente})]})})})}})]})]})]})},R=c(408),X=c(409),Y=k.a.Title,Z=k.a.Text,$=function(){var e=Object(g.g)();w(!1);var t=Object(r.useState)(F()),c=Object(a.a)(t,1)[0],s=Object(r.useContext)(l).socket,i=Object(r.useState)(null),o=Object(a.a)(i,2),j=o[0],b=o[1];return c.agente&&c.escritorio?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(q.a,{children:[Object(n.jsxs)(A.a,{span:20,children:[Object(n.jsx)(Y,{level:2,children:c.agente}),Object(n.jsx)(Z,{children:"Usted est\xe1 trabajando en el escritorio: "}),Object(n.jsx)(Z,{type:"success",children:c.escritorio})]}),Object(n.jsx)(A.a,{span:4,align:"right",children:Object(n.jsxs)(T.a,{shape:"round",type:"danger",onClick:function(){localStorage.clear(),e.replace("/ingresar")},children:[Object(n.jsx)(R.a,{}),"Salir"]})})]}),Object(n.jsx)(y.a,{}),j&&Object(n.jsx)(q.a,{children:Object(n.jsxs)(A.a,{children:[Object(n.jsx)(Z,{children:"Est\xe1 atendiendo el ticket n\xfamero: "}),Object(n.jsx)(Z,{style:{fontSize:30},type:"danger",children:j.numero})]})}),Object(n.jsx)(q.a,{children:Object(n.jsx)(A.a,{offset:18,span:6,align:"right",children:Object(n.jsxs)(T.a,{onClick:function(){s.emit("siguiente-ticket-trabajar",c,(function(e){b(e)}))},type:"primary",children:[Object(n.jsx)(X.a,{}),"Siguiente"]})})})]}):Object(n.jsx)(g.a,{to:"/ingresar"})},_=c(410),ee=k.a.Title,te=k.a.Text,ce=function(){w(!0);var e=Object(r.useContext)(l).socket,t=Object(r.useState)(null),c=Object(a.a)(t,2),s=c[0],i=c[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(q.a,{children:Object(n.jsxs)(A.a,{span:14,offset:6,align:"center",children:[Object(n.jsx)(ee,{level:3,children:"Presione el bot\xf3n para un nuevo ticket"}),Object(n.jsx)(T.a,{type:"primary",shape:"round",icon:Object(n.jsx)(_.a,{}),size:"large",onClick:function(){e.emit("solicitar-ticket",null,(function(e){i(e)}))},children:"Nuevo ticket"})]})}),s&&Object(n.jsx)(q.a,{style:{marginTop:100},children:Object(n.jsxs)(A.a,{span:14,offset:6,align:"center",children:[Object(n.jsx)(te,{level:2,children:"Su n\xfamero"}),Object(n.jsx)("br",{}),Object(n.jsx)(te,{type:"success",style:{fontSize:55},children:s.numero})]})})]})},ne=(d.a.Header,d.a.Sider),re=d.a.Content,se=function(){var e=Object(r.useContext)(u).ocultarMenu;return Object(n.jsx)(f.a,{children:Object(n.jsxs)(d.a,{style:{height:"100vh"},children:[Object(n.jsxs)(ne,{collapsedWidth:"0",breakpoint:"md",hidden:e,children:[Object(n.jsx)("div",{className:"logo"}),Object(n.jsxs)(x.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],children:[Object(n.jsx)(x.a.Item,{icon:Object(n.jsx)(h.a,{}),children:Object(n.jsx)(f.b,{to:"/ingresar",children:"Ingresar"})},"1"),Object(n.jsx)(x.a.Item,{icon:Object(n.jsx)(m.a,{}),children:Object(n.jsx)(f.b,{to:"/cola",children:"Cola de tickets"})},"2"),Object(n.jsx)(x.a.Item,{icon:Object(n.jsx)(p.a,{}),children:Object(n.jsx)(f.b,{to:"/crear",children:"Crear ticket"})},"3")]})]}),Object(n.jsx)(d.a,{className:"site-layout",children:Object(n.jsx)(re,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280},children:Object(n.jsxs)(g.d,{children:[Object(n.jsx)(g.b,{path:"/ingresar",component:H}),Object(n.jsx)(g.b,{path:"/cola",component:Q}),Object(n.jsx)(g.b,{path:"/crear",component:ce}),Object(n.jsx)(g.b,{path:"/escritorio",component:$}),Object(n.jsx)(g.a,{to:"ingresar"})]})})})]})})},ie=function(){return Object(n.jsx)(b,{children:Object(n.jsx)(O,{children:Object(n.jsx)(se,{})})})};i.a.render(Object(n.jsx)(ie,{}),document.getElementById("root"))}},[[395,1,2]]]);
//# sourceMappingURL=main.85b21427.chunk.js.map